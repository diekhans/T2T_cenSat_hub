#!/usr/bin/env python3

import argparse
import sys


def parseArgs():
    usage = """keep score in range.
"""
    parser = argparse.ArgumentParser(description=usage)
    parser.add_argument('inBed', nargs='?', default=None,
                        help="input BED file")
    parser.add_argument('outBed', nargs='?', default=None,
                        help="output BED file")
    return parser.parse_args()

def editBedLine(line, outFh):
    row = line.split()
    if len(row) >= 5:
        sc = row[4]
        try:
            sc = str(min(max(int(float(sc)), 0), 1000))
        except ValueError:
            sc = '0'
        row[4] = sc
    print(*row, sep='\t', file=outFh)

def main(args):
    inBedFh = open(args.inBed) if args.inBed is not None else sys.stdin
    outBedFh = open(args.outBed, "w") if args.outBed is not None else sys.stdout
    for line in inBedFh:
        editBedLine(line[0:-1], outBedFh)
    if args.outBed is not None:
        outBedFh.close()

main(parseArgs())
